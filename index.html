<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ストップウォッチ作成課題</title>
</head>
<body>
    <div id="time">00:00:00.000</div>
    <div>
        <input id="start" type="button" value="start">
        <input id="stop" type="button" value="stop">
        <input id="reset" type="button" value="reset">
    </div>
    <script>
        const timeElement = document.getElementById('time');
        const start = document.getElementById('start');
        const stop = document.getElementById('stop');
        const reset = document.getElementById('reset');

        // 経過時間ミリ秒
        let elapsed = 0;
        
        let intervalId = null;

        function updateTime() {
            const ms = elapsed % 1000;
            const sec = Math.floor(elapsed / 1000) % 60;
            const min = Math.floor(elapsed / (1000*60)) % 60;
            const hour = Math.floor(elapsed / (1000*60*60));

            const msStr = ms.toString().padStart(3,'0');
            const sStr = sec.toString().padStart(2, '0');
            const mStr = min.toString().padStart(2, '0');
            const hStr = hour.toString().padStart(2, '0');

            timeElement.innerHTML = `${hStr}:${mStr}:${sStr}.${msStr}`;
        }

        start.addEventListener('click', function(e){
            let pre = new Date();
            intervalId = setInterval(function() {
                const now = new Date();
                elapsed += now - pre;
                pre = now;
                updateTime();
            },10);
        });

        stop.addEventListener('click', function(e){
            clearInterval(intervalId);
        });

        reset.addEventListener('click', function(e){
            elapsed = 0;
        });
    </script>
</body>
</html>